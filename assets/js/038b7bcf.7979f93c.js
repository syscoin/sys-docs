"use strict";(self.webpackChunksys_docs=self.webpackChunksys_docs||[]).push([[5522],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(n),h=r,y=u["".concat(l,".").concat(h)]||u[h]||d[h]||s;return n?a.createElement(y,o(o({ref:t},p),{},{components:n})):a.createElement(y,o({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,o=new Array(s);o[0]=u;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var c=2;c<s;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},20108:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c,frontMatter:()=>s,metadata:()=>o,toc:()=>i});var a=n(87462),r=(n(67294),n(3905));const s={},o={unversionedId:"tech/notary",id:"tech/notary",isDocsHomePage:!1,title:"Notary and Business Rulesets",description:"On Syscoin's native UTXO chain, an asset issuer can opt to introduce a permissioned layer in the form of a notary for their specific token, such that simple value transfers of that asset must meet rules defined by the issuer in order to be notarized and allowed to settle on-chain. With a Notary endpoint, any allocation of the asset must pass the endpoint's checks to be granted the notary's signature and be accepted into a block.",source:"@site/docs/tech/notary.mdx",sourceDirName:"tech",slug:"/tech/notary",permalink:"/docs/tech/notary",version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"NEVM Chain (EVM)",permalink:"/docs/tech/nevm"},next:{title:"PoDA (Data Availability on Layer 1)",permalink:"/docs/tech/poda"}},i=[{value:"Regulatory Compliance at Scale",id:"regulatory-compliance-at-scale",children:[]},{value:"General Purpose",id:"general-purpose",children:[]},{value:"How to Implement",id:"how-to-implement",children:[{value:"Relevant Fields",id:"relevant-fields",children:[]},{value:"How to Activate Notary",id:"how-to-activate-notary",children:[]}]}],l={toc:i};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"On Syscoin's native UTXO chain, an asset issuer can opt to introduce a permissioned layer in the form of a notary for their specific token, such that simple value transfers of that asset must meet rules defined by the issuer in order to be notarized and allowed to settle on-chain. With a Notary endpoint, any allocation of the asset must pass the endpoint's checks to be granted the notary's signature and be accepted into a block."),(0,r.kt)("h2",{id:"regulatory-compliance-at-scale"},"Regulatory Compliance at Scale"),(0,r.kt)("p",null,"This feature is particularly useful for stablecoin redemption, ensuring asset transactions are compliant with regulations prior to receiving approval. It enables asset issuers to attain pre-compliance on a public blockchain without requiring a third-party to take custody of the asset, while providing for issuers to adapt their rulesets to ever-changing industry regulations."),(0,r.kt)("h2",{id:"general-purpose"},"General Purpose"),(0,r.kt)("p",null,"This feature can also be tied to any set of business rules the token issuer wishes to trigger and/or enforce. This can also be used to add an optional trust-based security domain for expedited service."),(0,r.kt)("p",null,"You can read more about the design and philosophy behind this capability in ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/syscoin/sips/blob/master/sip-0002.mediawiki"},"SIP-0002"),"."),(0,r.kt)("h2",{id:"how-to-implement"},"How to Implement"),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("strong",{parentName:"p"},"UPDATE:")," The Syscoin Core RPCs used in the example below, and other SPT-oriented RPCs, have been deprecated and removed as of Syscoin Core 4.4.",(0,r.kt)("br",{parentName:"p"}),"\n","Now ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/syscoin/syscoinjs-lib"},"syscoinjs-lib"))," and ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/syscoin/syscointx-js"},"syscointx-js"))," are used to create/manage digital assets, auxfees, and notaries on the UTXO chain."),(0,r.kt)("p",{parentName:"div"},"Examples are available at ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/syscoin/syscoinjs-lib-examples"},"https://github.com/syscoin/syscoinjs-lib-examples")),"."),(0,r.kt)("p",{parentName:"div"},"For a complete list of these deprecated RPCs, review the ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/syscoin/syscoin/blob/master/doc/release-notes/release-notes-4.4.0.md"},"Syscoin Core 4.4 release notes")),"."))),(0,r.kt)("p",null,"To begin, let's look at an asset notary example within a Syscoin Core console."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'> syscoin-cli assetinfo 1815902629\n\n{\n  "asset_guid": "1815902629",\n  "symbol": "FANCY",\n  "public_value": {\n    "desc": "NFT with auxfees and notary"\n  },\n  "contract": "",\n  "notary_address": "tsys1qzy52g933vjc66kw9rnwk2mz25rnymv29q0dr8q",\n  "notary_details": {\n    "endpoint": "https://111.111.111.111:8081/notarize",\n    "instant_transfers": 1,\n    "hd_required": 0\n  },\n  "auxfee": {\n    "auxfee_address": "tsys1qzy52g933vjc66kw9rnwk2mz25rnymv29q0dr8q",\n    "fee_struct": [\n      {\n        "bound": 0.00000000,\n        "percentage": 0.01\n      },\n      {\n        "bound": 10.00000000,\n        "percentage": 0.004\n      },\n      {\n        "bound": 250.00000000,\n        "percentage": 0.002\n      },\n      {\n        "bound": 2500.00000000,\n        "percentage": 0.0007\n      },\n      {\n        "bound": 25000.00000000,\n        "percentage": 6e-05\n      },\n      {\n        "bound": 250000.00000000,\n        "percentage": 0\n      }\n    ]\n  },\n  "total_supply": 10.00000000,\n  "max_supply": 9999.00000000,\n  "updatecapability_flags": 127,\n  "precision": 8\n}\n')),(0,r.kt)("h3",{id:"relevant-fields"},"Relevant Fields"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"notary_address (string)"),"\nPublic key of the endpoint's notary signer. Typically an address chosen by the issuer for which the Notary holds the private key. If specified, the private key associated with this address must sign any transaction of this asset in order for the network to accept it into a block."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"notary_details.endpoint (string)"),"\nAPI endpoint URL."),(0,r.kt)("p",null,"When a client executes assetallocationsend, an HTTP POST is sent to the endpoint specified here and the client awaits a response. Response timeout is 15 seconds."),(0,r.kt)("p",null,"The client's POST provides the endpoint a raw transaction hex which the notary then decodes, parses, then logically processes."),(0,r.kt)("p",null,"The endpoint URL can point to any application or script of any language that can receive and process POST requests and provide an appropriate JSON response. The endpoint must return details of a successfully notarized (signed) transaction broadcasted to the network or the client's request is considered failed or rejected."),(0,r.kt)("p",null,"Endpoint programs can interact with Syscoin by making RPC calls directly to a Syscoin Core instance (see syscoin-js), or through a Web3 approach by using a combination of syscoinjs-lib and Syscoin Blockbook."),(0,r.kt)("p",null,"A rudimentary example of a notary endpoint is available ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/syscoin/notary-endpoint/"},"here"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"notary_details.instant_transfers (boolean)"),"\nThis flag indicates whether the notary is offering a guarantee of extra security in prevention of double spends. Recipients can instantly redeem/spend notarized inputs if they fully trust the notary's security."),(0,r.kt)("p",null,"This security path theoretically can provide payment service even faster than Z-DAG's decentralized relay and is based on an optional trust trade-off."),(0,r.kt)("p",null,"Endpoints can ensure protection against double spends by tracking spend requests of an input and responding to them based on the existence (or lack) of prior spend attempts."),(0,r.kt)("p",null,"If 0, the notary is not guaranteeing any supplementary security measures and transactors of the asset should rely exclusively upon Z-DAG and/or Syscoin Core consensus."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"notary_details.hd_required (boolean)"),"\nThis flag indicates the notary requires HD wallet approval (for sender approval specifically applicable to change address schemes), usually in the form of the account XPUB or verifiable credential of the account XPUB using decentralized identity"),(0,r.kt)("h3",{id:"how-to-activate-notary"},"How to Activate Notary"),(0,r.kt)("p",null,"An issuer can enable Notary on an asset by setting parameters in assetnew (upon asset creation), or assetupdate (updating the asset spec, if the asset's current update_capabilityflags value permits this)."),(0,r.kt)("p",null,"Enable Notary via ",(0,r.kt)("inlineCode",{parentName:"p"},"assetnew")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'> syscoin-cli assetnew 100 "ECASH" "Non-custodial KYC/AML-enabled Electronic Cash" "" 8 888000000 127 "tsys1qzy52g933vjc66kw9rnwk2mz25rnymv29q0dr8q" "{\\"endpoint\\":\\"https://111.111.111.111:8081/notarize\\", \\"instant_transfers\\": 0, \\"hd_required\\": 1}" {}\n')),(0,r.kt)("p",null,"Enable Notary via ",(0,r.kt)("inlineCode",{parentName:"p"},"assetupdate")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'> syscoin-cli assetupdate 1020176632 "Non-custodial KYC/AML-enabled Electronic Cash" "" 127 "tsys1qzy52g933vjc66kw9rnwk2mz25rnymv29q0dr8q" "{\\"endpoint\\":\\"https://111.111.111.111:8081/notarize\\", \\"instant_transfers\\": 0, \\"hd_required\\": 1}" {}\n')))}c.isMDXComponent=!0}}]);